(this.webpackJsonphacker_news=this.webpackJsonphacker_news||[]).push([[0],{17:function(t,e,n){},18:function(t,e,n){},21:function(t,e,n){"use strict";n.r(e);var s=n(1),i=n.n(s),a=n(12),r=n.n(a),c=(n(17),n(6)),o=n(7),l=n(8),h=n(10),d=n(9),u=(n(18),n(23)),j=n(24),p=n(25),b=n(0),v=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(t){var s;return Object(o.a)(this,n),(s=e.call(this,t)).state={news_ids:[],stories:{}},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;fetch("https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty").then((function(t){return t.json()})).then((function(e){t.setState({news_ids:e.slice(0,30)}),t.populateData()}))}},{key:"populateData",value:function(){var t=this,e=this.state.news_ids.map((function(t){return"https://hacker-news.firebaseio.com/v0/item/"+t+".json?print=pretty"}));Promise.all(e.map((function(t){return fetch(t).then((function(t){return t.json()}))}))).then((function(e){for(var n={},s=[],i=0;i<e.length;i++){var a,r=e[i];r.numHighlights=0,n[e[i].id]=r,s.push(null!==(a=e[i].url)&&void 0!==a?a:"")}return t.setState({stories:n}),s})).then((function(e){fetch("https://hacker-news-dot-commandfeed.uc.r.appspot.com/getHighlights",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({urls:e})}).then((function(t){return t.json()})).then((function(e){for(var n=t.state.stories,s=0;s<e.length;s++)for(var i in n)if(n[i].url==e[s].url){var a=n[i];a.highlights=e[s].highlights,a.numHighlights=e[s].highlights.length,n[i]=a,t.setState({stories:n})}}))}))}},{key:"render",value:function(){var t=this,e=this.state.news_ids.map((function(e,n){return Object(b.jsx)(x,{number:n+1,data:t.state.stories[e]},n)}));return Object(b.jsxs)(u.a,{children:[Object(b.jsx)("div",{className:"App",children:Object(b.jsx)("header",{className:"App-header",children:"Highlighted Hacker News"})}),Object(b.jsx)("div",{className:"Content",children:e})]})}}]),n}(i.a.Component),x=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(t){var s;return Object(o.a)(this,n),(s=e.call(this,t)).state={expanded:!1},s.expand=s.expand.bind(Object(c.a)(s)),s.goToWebsite=s.goToWebsite.bind(Object(c.a)(s)),s}return Object(l.a)(n,[{key:"expand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"goToWebsite",value:function(){var t;if(null!=(null===(t=this.props.data)||void 0===t?void 0:t.url)){var e,n=null===(e=this.props.data)||void 0===e?void 0:e.url;window.location.href=n}}},{key:"render",value:function(){var t,e=Object(b.jsx)("div",{});if(this.state.expanded){var n,s,i=Object(b.jsx)("div",{});if(null===(n=this.props.data)||void 0===n?void 0:n.highlights)i=null===(s=this.props.data)||void 0===s?void 0:s.highlights.map((function(t){return Object(b.jsx)(O,{text:t})}));e=Object(b.jsxs)("div",{children:[i,Object(b.jsxs)("div",{className:"EntryFooter",children:[Object(b.jsx)("span",{onClick:this.goToWebsite,children:"Visit Website"}),Object(b.jsx)("span",{onClick:this.expand,children:" | See Less"})]})]})}var a="",r=Object(b.jsx)("span",{}),c=Object(b.jsx)("span",{});if(null!=(null===(t=this.props.data)||void 0===t?void 0:t.title)){var o,l,h,d,u,v,x;if(null!=(null===(o=this.props.data)||void 0===o?void 0:o.url))a="("+new URL(null===(x=this.props.data)||void 0===x?void 0:x.url).hostname+")";var f=null===(l=this.props.data)||void 0===l?void 0:l.title,g=null===(h=this.props.data)||void 0===h?void 0:h.score,m=null===(d=this.props.data)||void 0===d?void 0:d.by,y=(null===(u=this.props)||void 0===u?void 0:u.number)+".",k=null===(v=this.props.data)||void 0===v?void 0:v.numHighlights;r=Object(b.jsxs)("span",{children:[g," points by ",m]}),k>0&&(c=1==k?Object(b.jsxs)("span",{onClick:this.expand,children:[" | ",Object(b.jsxs)("b",{className:"boldHighlights",children:[k," Highlight "]})]}):Object(b.jsxs)("span",{onClick:this.expand,children:[" | ",Object(b.jsxs)("b",{className:"boldHighlights",children:[k," Highlights "]})]}))}return Object(b.jsxs)(j.a,{className:"Entry",children:[Object(b.jsx)(p.a,{xs:"auto",className:"EntryNumber",children:Object(b.jsx)("b",{children:y})}),Object(b.jsxs)(p.a,{className:"EntryDetails",children:[Object(b.jsxs)("div",{onClick:this.expand,className:"EntryTitle",children:[Object(b.jsx)("span",{children:f}),Object(b.jsx)("span",{className:"EntryHost",children:a})]}),Object(b.jsxs)("div",{className:"EntrySubline",children:[r,c]}),e]})]})}}]),n}(i.a.Component),O=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(b.jsxs)(j.a,{className:"Highlight",children:[Object(b.jsx)(p.a,{xs:"auto",children:Object(b.jsx)("div",{className:"Thread"})}),Object(b.jsx)(p.a,{xs:10,l:5,children:this.props.text})]})}}]),n}(i.a.Component),f=v,g=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,26)).then((function(e){var n=e.getCLS,s=e.getFID,i=e.getFCP,a=e.getLCP,r=e.getTTFB;n(t),s(t),i(t),a(t),r(t)}))};n(20);r.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(f,{})}),document.getElementById("root")),g()}},[[21,1,2]]]);
//# sourceMappingURL=main.d63d075a.chunk.js.map